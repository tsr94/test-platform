<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Test Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">Test Result</h2>

    <div class="alert alert-info">
        <strong>Total Score:</strong>
        <span th:text="${score}"></span> /
        <span th:text="${total}"></span>
    </div>

    <div th:each="qa, iter : ${questions}">
        <div class="card mb-4">
            <div class="card-header">
                <strong>Q[[${iter.index + 1}]].</strong>
                <span th:text="${qa.question.text}"></span>
            </div>
            <div class="card-body">
                <ul class="list-group">

                    <!-- A -->
                    <li class="list-group-item"
                        th:classappend=" 'A' == ${qa.question.correctAnswer} ? 'list-group-item-success' :
                                         ('A' == ${qa.userAnswer} ? 'list-group-item-danger' : '') ">
                        <span th:text="${qa.question.optionA}"></span>
                        <span th:if="'A' == ${qa.question.correctAnswer}" class="ms-2 text-success">✔ Correct</span>
                        <span th:if="'A' == ${qa.userAnswer} and 'A' != ${qa.question.correctAnswer}" class="ms-2 text-danger">✘ Your Answer</span>
                    </li>

                    <!-- B -->
                    <li class="list-group-item"
                        th:classappend=" 'B' == ${qa.question.correctAnswer} ? 'list-group-item-success' :
                                         ('B' == ${qa.userAnswer} ? 'list-group-item-danger' : '') ">
                        <span th:text="${qa.question.optionB}"></span>
                        <span th:if="'B' == ${qa.question.correctAnswer}" class="ms-2 text-success">✔ Correct</span>
                        <span th:if="'B' == ${qa.userAnswer} and 'B' != ${qa.question.correctAnswer}" class="ms-2 text-danger">✘ Your Answer</span>
                    </li>

                    <!-- C -->
                    <li class="list-group-item"
                        th:classappend=" 'C' == ${qa.question.correctAnswer} ? 'list-group-item-success' :
                                         ('C' == ${qa.userAnswer} ? 'list-group-item-danger' : '') ">
                        <span th:text="${qa.question.optionC}"></span>
                        <span th:if="'C' == ${qa.question.correctAnswer}" class="ms-2 text-success">✔ Correct</span>
                        <span th:if="'C' == ${qa.userAnswer} and 'C' != ${qa.question.correctAnswer}" class="ms-2 text-danger">✘ Your Answer</span>
                    </li>

                    <!-- D -->
                    <li class="list-group-item"
                        th:classappend=" 'D' == ${qa.question.correctAnswer} ? 'list-group-item-success' :
                                         ('D' == ${qa.userAnswer} ? 'list-group-item-danger' : '') ">
                        <span th:text="${qa.question.optionD}"></span>
                        <span th:if="'D' == ${qa.question.correctAnswer}" class="ms-2 text-success">✔ Correct</span>
                        <span th:if="'D' == ${qa.userAnswer} and 'D' != ${qa.question.correctAnswer}" class="ms-2 text-danger">✘ Your Answer</span>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>
